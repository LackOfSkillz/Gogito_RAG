<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Help_Center_Side_Nav" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-toc-path="Self-Help Tools|Integration Guides|Fireware" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Expires" content="3600" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="120x120" href="../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>Duo Security LDAP Authentication Integration Guide</title>
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/help_(en-US).css" rel="stylesheet" type="text/css" />
        <link href="../../Resources/TableStyles/headertop.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="120x120" href="../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-T3SCZC3');/* ]]> */</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" role="navigation" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 979px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../en-US/_intro/home.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div id="cover">
                                    </div>
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T3SCZC3" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="6" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                        </div>
                                    </div>
                                    <div role="main" id="mc-main-content">
                                        <h1><a name="aanchor19"></a>
                                            <MadCap:concept term="Self-Help Tools" />Duo Security LDAP Authentication Integration Guide</h1>
                                        <h2>Duo Security Integration Overview</h2>
                                        <p>This document describes how to integrate WatchGuard Mobile VPN with SSL client software download access and Mobile VPN with SSL client authentication with the Duo Security® two-factor authentication solution.</p>
                                        <p>You must install a local Duo Proxy service on a device within your network. The Duo Proxy receives incoming LDAP requests from your Firebox, contacts your existing local LDAP/AD server to perform primary authentication, and contacts the Duo cloud service for secondary authentication.</p>
                                        <h2>Test Topology</h2>
                                        <p>This diagram shows the test topology for this integration.</p>
                                        <p class="img">
                                            <img src="_images/duo-security-ldap-active directory/Topology diagram.png" alt="Topology diagram" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <h2>Platform and Software</h2>
                                        <p>The hardware and software used in this guide include:</p>
                                        <ul>
                                            <li>Firebox with Fireware v12.8 or higher</li>
                                            <li>Duo Security Authentication Proxy 5.6.1 on Windows </li>
                                            <li>Windows Server 2016 with Active Directory Domain Services</li>
                                            <li>Duo Mobile Application 4.15.0.43.1 on iOS</li>
                                        </ul>
                                        <h2>Configuration</h2>
                                        <p>To complete this integration, you must have:</p>
                                        <ul style="list-style-type: square;">
                                            <li>Duo account</li>
                                            <li>Duo Security Authentication Proxy</li>
                                            <li>Active Directory</li>
                                            <li>WatchGuard Firebox</li>
                                        </ul>
                                        <p>Use the Duo account to log in to the Duo Service to manage applications, enroll users, and get integration keys. The Duo Authentication Proxy acts as a bridge: it communicates with Active Directory, Duo Security service in the cloud, WatchGuard Firebox, and Duo mobile app. Active Directory is used for primary user authentication.</p>
                                        <p>In our configuration, Duo Security Authentication Proxy and Active Directory are located on the same subnet.</p>
                                        <h2>Configure Firebox</h2>
                                        <p>You must configure the LDAP authentication settings and enable Mobile VPN with SSL on your Firebox.</p>
                                        <h3>Configure LDAP Authentication</h3>
                                        <ol start="1">
                                            <li value="1">Log in to Fireware Web UI (<span class="Input">https://&lt;your firebox IP address&gt;:8080</span>).</li>
                                            <li value="2">Select <b>Authentication &gt; Servers</b>.<br /><span class="NumContinued">The Authentication Servers page appears.</span></li>
                                            <p class="img">
                                                <img src="_images/duo-security-ldap-active directory/Firebox1.png" alt="Screenshot of Firebox, picture1" style="max-width: 100%;max-height: auto;" />
                                            </p>
                                            <li value="3">From the <b>Authentication Servers</b> list, select <b>LDAP</b>.<br /><span class="NumContinued">The LDAP page appears.</span></li>
                                            <li value="4">Select the <b>Enable LDAP Server</b> check box.</li>
                                            <li value="5">From the <b>IP Address/DNS Name</b> drop-down list, select <b>IP Address</b>.</li>
                                            <li value="6">In the text box adjacent to <b>IP Address/DNS Name</b>, type the Duo Security Authentication Proxy IP address.</li>
                                            <li value="7">In the <b>Port</b> text box, type <span class="Input">389</span>.</li>
                                            <li value="8">In the <b>Timeout</b> text box, type <span class="Input">90</span>.</li>
                                            <li value="9">In the <b>Search Base</b> text box, type the search base settings in standard format: dc=first part of distinguished server name, dc=any part of the distinguished server name that appears after the dot.</li>
                                            <li value="10">In the <b>DN of Searching User</b> text box, type the distinguished name (DN) for a search operation.<br /><span class="NumContinued">For example: cn=Administrator,cn=Users,dc=example,dc=com.</span></li>
                                            <li value="11">In the <b>Password of Searching User</b> text box, type the password associated with the distinguished name for a search operation.</li>
                                            <li value="12">From the <b>Login Attribute</b> drop-down list, select an LDAP login attribute to use for authentication. In our example, we select <b>cn</b>. In some cases, you might need to select other values, such as sAMAccountName.</li>
                                            <li value="13">Keep all other settings as the default values.</li>
                                            <p class="img">
                                                <img src="_images/duo-security-ldap-active directory/Firebox2.png" alt="Screenshot of Firebox, picture2" style="max-height: auto;max-width: 100%;" />
                                            </p>
                                            <li value="14">Click <b>Save</b>.</li>
                                        </ol>
                                        <h3>Configure Mobile VPN with SSL</h3>
                                        <p>From Fireware Web UI:</p>
                                        <ol>
                                            <li value="1">Select <b>VPN &gt; Mobile VPN</b>.</li>
                                            <li value="2">In the <b>SSL</b> section, click <b>Manually Configure</b>.</li>
                                            <p class="img">
                                                <img src="_images/duo-security-ldap-active directory/Firebox3.png" alt="Screenshot of Firebox, picture3" style="max-width: 100%;max-height: auto;" />
                                            </p>
                                            <li value="3">Select the <b>Activate Mobile VPN with SSL</b> check box.</li>
                                            <li value="4">In the <b>General</b> section, for the <b>Primary</b> text box, type the public IP address (external IP address) or domain name of the Firebox. This is the IP address or domain name that mobile VPN with SSL clients connect to by default.</li>
                                            <li value="5">Select the <b>Authentication</b> tab.</li>
                                            <li value="6">From the <b>Authentication Server</b> drop-down list, select the authentication server you created. </li>
                                            <li value="7">Click <b>Add</b>.</li>
                                            <li value="8">In the <b>Authentication Server</b> list, select your authentication server and click <b>Move Up</b> to move it to the top of the list (this makes it the default authentication server).<br /><span class="NumContinued">Mobile VPN with SSL uses the default authentication server unless a user specifies an authentication server in the Username text box on the Mobile VPN with SSL client.</span></li>
                                            <li value="9">In the <b>Users and Groups</b> section, from the <b>Create new</b> drop-down list, select the authentication server you created. </li>
                                            <li value="10">From the adjacent drop-down list, select <b>Group</b>. You can add a user or a group. In our example, we add a group.</li>
                                            <li value="11">Click <b>Add</b>.<br /><span class="NumContinued">The Add User or Group dialog box appears.</span></li>
                                            <li value="12">For <b>Type</b>, select <b>Group</b>.</li>
                                            <li value="13">In the <b>Name</b> text box, type a name for the group. The name of this group must be the same as the name of the Active Directory group your users belong to.</li>
                                            <li value="14">From the <b>Authentication Server</b> drop-down list, select your authentication server.</li>
                                            <li value="15">Click <b>Save</b>.</li>
                                            <p class="img">
                                                <img src="_images/duo-security-ldap-active directory/Firebox4.png" alt="Screenshot of Firebox, picture4" style="max-height: auto;max-width: 100%;" />
                                            </p>
                                            <li value="16">Click <b>Save</b>.</li>
                                        </ol>
                                        <h2>Configure Duo</h2>
                                        <h3><a name="_Create_a_Duo"></a>Set Up an Application</h3>
                                        <ol start="1">
                                            <li value="1">Sign up for a <a href="https://duo.com/" target="_blank">Duo account</a>.</li>
                                            <li value="2">Log in to the Duo Admin Panel and select <b>Applications</b>.</li>
                                            <li value="3">Select <b>Protect an Application</b> and find LDAP Proxy in the application list.</li>
                                            <li value="4">Select <b>Protect</b> to get the values of the <b>Integration key</b>, <b>Secret key</b>, and <b>API hostname</b>.</li>
                                            <li value="5">Click <b>Save</b>.</li>
                                        </ol>
                                        <h3>Sync Users to Duo from Active Directory</h3>
                                        <p>Organizations with an existing on-premises Microsoft Active Directory domain can import users, phones, and groups into Duo with directory synchronization.</p>
                                        <p>For detailed instructions about how to sync users from Active Directory, see <a href="https://duo.com/docs/adsync">Synchronizing Users from Active Directory</a>.</p>
                                        <h3>Configure the Duo Security Authentication Proxy for Primary Authentication</h3>
                                        <p>The Duo Security Authentication Proxy  validates the user password. In our integration, you must configure the Proxy to communicate with the Active Directory.</p>
                                        <p>To configure the Proxy, add an <span class="Input">[ad_client]</span> section at the beginning of the file that includes the properties described in this list. All properties are required.</p>
                                        <table style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/headertop.css');width: 832px;" class="TableStyle-headertop" cellspacing="0">
                                            <col class="TableStyle-headertop-Column-Column1" style="width: 211px;" />
                                            <col class="TableStyle-headertop-Column-Column1" style="width: 619px;" />
                                            <thead>
                                                <tr class="TableStyle-headertop-Head-Header1" style="height: 35px;">
                                                    <th class="TableStyle-headertop-HeadE-Column1-Header1">
                                                        <p>Properties</p>
                                                    </th>
                                                    <th class="TableStyle-headertop-HeadD-Column1-Header1">
                                                        <p>Description</p>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="TableStyle-headertop-Body-Body1">
                                                    <td class="TableStyle-headertop-BodyE-Column1-Body1"><span class="Input">host</span>
                                                    </td>
                                                    <td class="TableStyle-headertop-BodyD-Column1-Body1">
                                                        <p>The hostname or IP address of your domain controller.</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-headertop-Body-Body2">
                                                    <td class="TableStyle-headertop-BodyE-Column1-Body2">
                                                        <p><span class="Input">service_account_username</span>
                                                        </p>
                                                    </td>
                                                    <td class="TableStyle-headertop-BodyD-Column1-Body2">
                                                        <p>The user name of a domain account that has permission to bind to your directory and perform searches.</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-headertop-Body-Body1">
                                                    <td class="TableStyle-headertop-BodyE-Column1-Body1"><span class="Input">service_account_password</span>
                                                    </td>
                                                    <td class="TableStyle-headertop-BodyD-Column1-Body1">
                                                        <p>The password corresponds to service_account_username.</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-headertop-Body-Body2">
                                                    <td class="TableStyle-headertop-BodyB-Column1-Body2">
                                                        <p><span class="Input">search_dn</span>
                                                        </p>
                                                    </td>
                                                    <td class="TableStyle-headertop-BodyA-Column1-Body2">
                                                        <p>The LDAP distinguished name (DN) of an Active Directory container or organizational unit (OU) contains all of the users you want to permit to log in. </p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <p>For example:</p>
                                        <p><span class="Input">[ad_client]</span>
                                            <br /><span class="Input">host=192.168.4.19</span>
                                            <br /><span class="Input">service_account_username=Administrator</span>
                                            <br /><span class="Input">service_account_password=Passw0rd</span>
                                            <br /><span class="Input">search_dn=DC=example,DC=com</span>
                                        </p>
                                        <h3>Configure the Duo Security Authentication Proxy to Work with the Firebox</h3>
                                        <p>To configure the Duo Authentication Proxy to work with the Firebox, create a <span class="Input">[ldap_server_auto]</span> section in the Proxy configuration file that includes the properties described in this list. All properties are required.</p>
                                        <p>Save the configuration file when you are done.</p>
                                        <table style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/headertop.css');" class="TableStyle-headertop" cellspacing="0">
                                            <col class="TableStyle-headertop-Column-Column1" style="width: 173px;" />
                                            <col class="TableStyle-headertop-Column-Column1" style="width: 659px;" />
                                            <thead>
                                                <tr class="TableStyle-headertop-Head-Header1">
                                                    <th class="TableStyle-headertop-HeadE-Column1-Header1">
                                                        <p>Properties</p>
                                                    </th>
                                                    <th class="TableStyle-headertop-HeadD-Column1-Header1">
                                                        <p>Description</p>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="TableStyle-headertop-Body-Body1">
                                                    <td class="TableStyle-headertop-BodyE-Column1-Body1"><span class="Input">ikey</span>
                                                    </td>
                                                    <td class="TableStyle-headertop-BodyD-Column1-Body1">
                                                        <p>The <b>Integration key</b>, as referenced in the <a href="#_Create_a_Duo">Setting Up an Application</a> section of this document.</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-headertop-Body-Body2">
                                                    <td class="TableStyle-headertop-BodyE-Column1-Body2"><span class="Input">skey</span>
                                                    </td>
                                                    <td class="TableStyle-headertop-BodyD-Column1-Body2">
                                                        <p>The <b>Secret key</b>, as referenced in the <a href="#_Create_a_Duo">Setting up An Application</a> section of this document.</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-headertop-Body-Body1">
                                                    <td class="TableStyle-headertop-BodyE-Column1-Body1"><span class="Input">api_host</span>
                                                    </td>
                                                    <td class="TableStyle-headertop-BodyD-Column1-Body1">
                                                        <p>The <b>API hostname</b>, as referenced in the <a href="#_Create_a_Duo">Setting up An Application</a> section of this document.</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-headertop-Body-Body2">
                                                    <td class="TableStyle-headertop-BodyB-Column1-Body2">
                                                        <p><span class="Input">client</span>
                                                        </p>
                                                    </td>
                                                    <td class="TableStyle-headertop-BodyA-Column1-Body2">
                                                        <p>Set this value to <b>ad_client</b> so that the Proxy uses Active Directory/LDAP for primary authentication. Make sure an <span class="Input">[ad_client]</span> section as described previously is configured.</p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <p>An example configuration file that uses Active Directory as the primary authenticator:</p>
                                        <p><span class="Input">[ad_client]</span>
                                            <br /><span class="Input">host=192.168.4.19</span>
                                            <br /><span class="Input">service_account_username=Administrator</span>
                                            <br /><span class="Input">service_account_password=Passw0rd</span>
                                            <br /><span class="Input">search_dn=DC=example,DC=com</span>
                                        </p>
                                        <p><span class="Input">[ldap_server_auto]</span>
                                            <br /><span class="Input">ikey=DI4D2NIDOJK13LO57WA0</span>
                                            <br /><span class="Input">skey=jqKSHXxFqimTOv6DUZ7xwY2Qm164B2XNtwiNE6mv</span>
                                            <br /><span class="Input">api_host=api-537a49ce.duosecurity.com</span>
                                            <br /><span class="Input">client=ad_client</span>
                                            <br /><span class="Input">failmode=safe</span>
                                            <br /><span class="Input">exempt_primary_bind=false</span>
                                            <br /><span class="Input">exempt_ou_1=cn=Administrator,cn=Users,dc=example,dc=com</span>
                                        </p>
                                        <h3>Start the Duo Authentication Proxy</h3>
                                        <p>On the Windows computer where the Duo Authentication Proxy is installed, open an Administrator command prompt and type this command:</p>
                                        <p><span class="Input">net start DuoAuthProxy</span>
                                        </p>
                                        <h2>Test the Integration</h2>
                                        <p style="page-break-after: avoid;page-break-before: avoid;">To test the integration of your Mobile VPN with SSL, authenticate with a mobile token on your mobile device. You can authenticate with a passcode or a push notification.</p>
                                        <p class="Note">If you select passcode authentication, you must type the password followed by a comma and append the passcode from the Duo Mobile App.</p>
                                        <p style="page-break-after: avoid;page-break-before: avoid;">In this example, we show the push authentication method (users receive a push notification in the mobile app that they must approve to authenticate).</p>
                                        <ol>
                                            <li value="1">Open your Mobile VPN with SSL client.</li>
                                            <li value="2">In the <b>Server</b> text box, type the external IP address of the Firebox.</li>
                                            <li value="3">In the <b>User name</b> text box, type the user cn value.</li>
                                            <li value="4">In the <b>Password</b> text box, type the password.</li>
                                            <li value="5">Click <b>Connect</b>.</li>
                                            <li value="6">Approve the authentication request that is sent to your mobile device.<br /><span class="NumContinued">The VPN connects successfully.</span></li>
                                            <p class="img">
                                                <img src="_images/duo-security-ldap-active directory/SSL Client.png" alt="Screenshot of authentication diagram" style="max-height: auto;max-width: 100%;" />
                                            </p>
                                        </ol>
                                    </div>
                                    <p class="FooterTop"><a href="../../en-US/Fireware/support/doc_feedback.html">Give Us Feedback</a>&#160;&#160;●&#160;&#160;
            <a href="../../en-US/Fireware/support/getsupport.html">Get Support</a>&#160;&#160;●&#160;&#160;
            <a href="https://www.watchguard.com/wgrd-help/documentation/overview" target="_blank">All Product Documentation</a>&#160;&#160;●&#160;&#160;
            <a href="https://techsearch.watchguard.com/" target="_blank">Technical Search</a></p>
                                    <p class="Footer">© <span class="mc-variable Global.CurrentYear variable">2024</span> WatchGuard Technologies, Inc. All rights reserved. WatchGuard and the WatchGuard logo are registered trademarks or trademarks of WatchGuard Technologies in the United States and other countries. Various other trademarks are held by their respective owners.</p>
                                    <p class="Footer">&#160;</p>
                                    <div id="expand-collapse" title="Expand/collapse navigation" class="collapse">
                                    </div>
                                    <script src="../../Resources/MasterPages/scripts/expand-collapse.js">
                                    </script>
                                    <script src="../../Resources/MasterPages/scripts/cover-hide.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>