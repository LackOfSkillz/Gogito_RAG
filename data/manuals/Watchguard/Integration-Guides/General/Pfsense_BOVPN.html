<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Help_Center_Side_Nav" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-toc-path="Self-Help Tools|Integration Guides|Fireware" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Expires" content="3600" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="120x120" href="../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>pfSense and Firebox Branch Office VPN Integration Guide</title>
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/help_(en-US).css" rel="stylesheet" type="text/css" />
        <link rel="apple-touch-icon" sizes="120x120" href="../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-T3SCZC3');/* ]]> */</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" role="navigation" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 979px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../en-US/_intro/home.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div id="cover">
                                    </div>
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T3SCZC3" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="6" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                        </div>
                                    </div>
                                    <div role="main" id="mc-main-content">
                                        <h1 id="pfSenseandFireboxBranchOfficeVPNIntegrationGuide" data-magellan-target="pfSenseandFireboxBranchOfficeVPNIntegrationGuide"><a name="aanchor175"></a>
                                            <MadCap:concept term="Self-Help Tools" />pfSense and Firebox Branch Office VPN Integration Guide</h1>
                                        <h3 id="Contents" data-magellan-target="Contents">Contents</h3>
                                        <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 980px)" class="nocontent menu _Skins_Help_Center_Menu_Slide mc-component">
                                            <li class="tree-node"><a href="#pfSenseandFireboxBranchOfficeVPNIntegrationGuide">pfSense and Firebox Branch Office VPN Integration Guide</a>
                                            </li>
                                            <li>
                                                <ul>
                                                    <li>
                                                        <ul>
                                                            <li class="tree-node"><a href="#Contents">Contents</a>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li class="tree-node"><a href="#DeploymentOverview">Deployment Overview</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#IntegrationSummary">Integration Summary</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#IntegrationTopology">Integration Topology</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#ConfiguretheFirebox">Configure the Firebox </a>
                                                    </li>
                                                    <li class="tree-node"><a href="#ConfigurepfSense">Configure pfSense</a>
                                                    </li>
                                                    <li>
                                                        <ul>
                                                            <li class="tree-node"><a href="#ConfigureBasicSettings">Configure Basic Settings</a>
                                                            </li>
                                                            <li class="tree-node"><a href="#ConfigurethepfSenseIPSecVPNPhase1Settings">Configure the pfSense IPSec VPN Phase 1 Settings</a>
                                                            </li>
                                                            <li class="tree-node"><a href="#ConfigurethepfSenseIPSecVPNPhase2Settings">Configure the pfSense IPSec VPN Phase 2 Settings</a>
                                                            </li>
                                                            <li class="tree-node"><a href="#ConfigureRuleSettings">Configure Rule Settings</a>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li class="tree-node"><a href="#TesttheIntegration">Test the Integration</a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <h2 id="DeploymentOverview" data-magellan-target="DeploymentOverview">Deployment Overview</h2>
                                        <p>WatchGuard provides integration instructions to help our customers configure WatchGuard products to work with products created by other organizations. If you need more information or technical support about how to configure a third-party product, go to the documentation and support resources for that product.</p>
                                        <p>This integration guide describes how to configure a Branch Office VPN (BOVPN) between a WatchGuard Firebox and a pfSense device.</p>
                                        <div class="summary-left">
                                            <h2 id="IntegrationSummary" data-magellan-target="IntegrationSummary">Integration Summary</h2>
                                            <p>The hardware and software used in this guide include:</p>
                                            <ul style="list-style-type: square;">
                                                <li>WatchGuard Firebox with Fireware v12.10</li>
                                                <li>pfSense device with v2.7.0-RELEASE (amd64)</li>
                                            </ul>
                                        </div>
                                        <h2 id="IntegrationTopology" data-magellan-target="IntegrationTopology">Integration Topology</h2>
                                        <p>This diagram outlines the topology used in this integration.</p>
                                        <p class="img">
                                            <img src="_images/pfSense_BOVPN/topology diagram.png" alt="Topology diagram" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <h2 id="ConfiguretheFirebox" data-magellan-target="ConfiguretheFirebox">Configure the Firebox </h2>
                                        <p>On the Firebox, configure a Branch Office VPN (BOVPN) connection:</p>
                                        <ol start="1">
                                            <li value="1">Log in to Fireware Web UI.</li>
                                            <li value="2">Select <b>VPN &gt; Branch Office VPN</b>. <br /><span class="NumContinued">The Branch Office VPN configuration page opens.</span></li>
                                            <li value="3">In the <b>Gateways</b> section, click <b>Add</b>.</li>
                                            <li value="4">In the <b>Gateway Name</b> text box, type a name to identify this BOVPN gateway. </li>
                                            <li value="5">From the <b>Address Family</b> drop-down list, select <b>IPv4 Addresses</b>.</li>
                                            <li value="6">In the <b>Credential Method</b> section, select <b>Use Pre-Shared Key</b>. Type the pre-shared key.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new Firebox1.png" alt="Screen shot of the general BOVPN settings" style="max-height: auto;max-width: 100%;" />
                                        </p>
                                        <ol start="7">
                                            <li value="7">In the <b>Gateway Endpoint</b> section, click <b>Add</b>.<br /><span class="NumContinued">The Gateway Endpoint Settings dialog box opens.</span></li>
                                            <li value="8">From the <b>External Interface</b> drop-down list, select <b>External</b>.</li>
                                            <li value="9">From the <b>Interface IP Address</b> drop-down list, select <b>Primary Interface IPv4 Address</b>.<br /> <span class="NumContinued">The Primary Interface IP Address is the primary IP&#160;address you configured on the selected external interface.</span></li>
                                            <li value="10">Select <b>By IP Address</b>. Type the primary IP address of the external Firebox interface.<br /></li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new Firebox2.png" alt="Screen shot of the gateway endpoint settings" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="11">
                                            <li value="11">Select the <b>Remote Gateway</b> tab.</li>
                                            <li value="12">Select <b>Static IP Address</b>. Type the IP address of your pfSense WAN connection. </li>
                                            <li value="13">Select <b>By IP Address</b>. Type the IP address of your pfSense WAN connection.  </li>
                                            <li value="14">Keep the default values for all other settings.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new Firebox3.png" alt="Screen shot of the complete gateway endpoint configuration" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="15">
                                            <li value="15">Click <b>OK</b>.</li>
                                            <li value="16">In the <b>Gateway Endpoint</b> section, select the <b>Start Phase 1 tunnel when Firebox starts</b> check box.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new Firebox4.png" alt="Screen shot of the completed general settings configuration" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="17">
                                            <li value="17">Select the <b>Phase 1 Settings</b> tab.</li>
                                            <li value="18">From the <b>Version</b> drop-down list, select <b>IKEv2</b>.</li>
                                            <li value="19">Keep the default values for all of the Phase 1 Settings.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new Firebox5.png" alt="Screen shot of the Phase 1 settings" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="20">
                                            <li value="20">Click <b>Save</b>.</li>
                                            <li value="21">In the <b>Tunnels</b> section, click <b>Add</b>.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new Firebox6.png" alt="Screen shot of the Gateways and Tunnels lists" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="22">
                                            <li value="22">From the <b>Gateway</b> drop-down list, select the gateway that you configured.</li>
                                            <li value="23">In the <b>Addresses</b> section, click <b>Add</b>.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new Firebox7.png" alt="Screen shot of the Addresses settings" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="24">
                                            <li value="24">In the <b>Local IP</b> section, from the <b>Choose Type</b> drop-down list, select <b>Network IPv4</b>.</li>
                                            <li value="25">In the <b>Network IP</b> text box, type the local IP segment. This is the local network protected by the Firebox.</li>
                                            <li value="26">In the <b>Remote IP</b> section, from the <b>Choose Type</b> drop-down list, select <b>Network IPv4</b>.</li>
                                            <li value="27">In the <b>Network IP</b> text box, type the remote IP segment. This is the local network protected by pfSense.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new Firebox8.png" alt="Screen shot of the tunnel route settings" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="28">
                                            <li value="28">Click <b>OK</b>.</li>
                                            <li value="29">Keep the default values for all of the Phase 2 Settings.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new Firebox9.png" alt="Screen shot of the Phase 2 settings" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="30">
                                            <li value="30">Click <b>Save</b>.</li>
                                        </ol>
                                        <h2 id="ConfigurepfSense" data-magellan-target="ConfigurepfSense">Configure pfSense</h2>
                                        <h3 id="ConfigureBasicSettings" data-magellan-target="ConfigureBasicSettings">Configure Basic Settings</h3>
                                        <ol start="1">
                                            <li value="1">Log in to the pfSense Web UI at: <span class="Input">https://&lt;IP address of the pfSense&gt;</span> <br />The default IP address of the interface is: <span class="Input">https://192.168.1.1</span></li>
                                            <li value="2">Configure the pfSense interfaces. <br /><span class="NumContinued">For information about how to configure interfaces, go to the pfSense documentation.</span></li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new pfSense1.png" alt="Screenshot of pfSense, picture new1" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new pfSense10.png" alt="Screenshot of pfSense, picture new10" style="max-height: auto;max-width: 100%;" />
                                        </p>
                                        <h3 id="ConfigurethepfSenseIPSecVPNPhase1Settings" data-magellan-target="ConfigurethepfSenseIPSecVPNPhase1Settings">Configure the pfSense IPSec VPN Phase 1 Settings</h3>
                                        <ol start="1">
                                            <li value="1">Select <b>VPN &gt; IPsec &gt; Tunnels</b>. </li>
                                            <li value="2">Click <b>+ Add P1</b>.</li>
                                            <li value="3">In the <b>IKE Endpoint Configuration</b> section, from the <b>Key Exchange version</b> drop-down list, select <b>IKEv2</b>.</li>
                                            <li value="4">From the <b>Internet Protocol</b> drop-down list, select <b>IPv4</b>.</li>
                                            <li value="5">From the <b>Interface</b> drop-down list, select <b>WAN</b>.</li>
                                            <li value="6">In the <b>Remote Gateway</b> text box, type the IP address of the remote gateway.</li>
                                            <li value="7">In the <b>Phase 1 Proposal (Authentication)</b> section, from the <b>Authentication Method</b> drop-down list, select <b>Mutual PSK</b>.</li>
                                            <li value="8">From the <b>My identifier</b> drop-down list, select <b>My IP address</b>.</li>
                                            <li value="9">From the <b>Peer identifier</b> drop-down list, select <b>Peer IP address</b>.</li>
                                            <li value="10">In the <b>Pre-Shared Key</b> text box, type the pre-shared key.</li>
                                            <li value="11">In the <b>Phase 1 Proposal (Encryption Algorithm)</b> section, from the <b>Algorithm</b> drop-down list, select <b>AES</b>.</li>
                                            <li value="12">From the <b>Key length</b> drop-down list, select <b>256 bits</b>.</li>
                                            <li value="13">From the <b>Hash</b> drop-down list, select <b>SHA256</b>.</li>
                                            <li value="14">From the <b>DH Group</b> drop-down list, select <b>14 (2048 bit)</b>.</li>
                                            <li value="15">In the <b>Life Time</b> text box, type <b>28800</b>.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/Pfsense-IPsec-Phase_1-001.png" alt="Screenshot of pfSense, picture Pfsense-IPsec-Phase-1_001" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/pfsense-IPsec-Phase_1-002.png" alt="Screenshot of pfSense, picture Pfsense-IPsec-Phase-1_002" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="16">
                                            <li value="16">Keep the default values for all other settings.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/pfsense-IPsec-Phase_1-003.png" alt="Screenshot of pfSense, picture Pfsense-IPsec-Phase_1-003" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="17">
                                            <li value="17">Click <b>Save</b>.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new pfSense6.png" alt="Screenshot of pfSense, picture new6" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <h3 id="ConfigurethepfSenseIPSecVPNPhase2Settings" data-magellan-target="ConfigurethepfSenseIPSecVPNPhase2Settings">Configure the pfSense IPSec VPN Phase 2 Settings</h3>
                                        <ol start="1">
                                            <li value="1">Click <b>Show Phase 2 Entries (0)</b>.</li>
                                            <li value="2">Click <b>+ Add P2</b>.</li>
                                            <li value="3">In the <b>General Information</b> section, from the <b>Mode</b> drop-down list, select <b>Tunnel IPv4</b>.</li>
                                            <li value="4">For <b>Local Network</b>, from the <b>Type</b> drop-down list, select <b>Network</b>.</li>
                                            <li value="5">In the <b>Address</b> text box, type the local network IP address.</li>
                                            <li value="6">For <b>Remote Network</b>,  from the <b>Type</b> drop-down list, select <b>Network</b>.</li>
                                            <li value="7">In the <b>Address</b> text box, type the remote network IP address.</li>
                                            <li value="8">In the <b>Phase 2 Proposal (SA/Key Exchange)</b> section,  from the <b>Protocol</b> drop-down list, select <b>ESP</b>.</li>
                                            <li value="9">For <b>Encryption Algorithms</b>, select <b>AES</b>. In the adjacent drop-down list, select <b>256 bits</b>.</li>
                                            <li value="10">For <b>Hash Algorithms</b>, select the <b>SHA256</b> check box. </li>
                                            <li value="11">From the <b>PFS key group</b> drop-down list, select <b>14 (2048 bit)</b>.</li>
                                            <li value="12">In the <b>Life Time</b> text box, type <b>3600</b>.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/Pfsense-IPsec-Phase_2-001.png" alt="Screenshot of pfSense, picture IPsec Phase 2 one" style="max-height: auto;max-width: 100%;" />
                                        </p>
                                        <ol start="13">
                                            <li value="13">Click <b>Save</b>.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new pfSense8.png" alt="Screenshot of pfSense, picture new8" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="14">
                                            <li value="14">Click <b>Apply Changes</b>.</li>
                                        </ol>
                                        <h3 id="ConfigureRuleSettings" data-magellan-target="ConfigureRuleSettings">Configure Rule Settings</h3>
                                        <ol start="1">
                                            <li value="1">Select <b>Firewall &gt; Rules &gt; IPsec</b>.</li>
                                            <li value="2">Click <b>Add</b>.</li>
                                            <li value="3">From the <b>Action</b> drop-down list, select <b>Pass</b>.</li>
                                            <li value="4">From the <b>Protocol</b> drop-down list, select <b>Any</b>.</li>
                                            <li value="5">From the <b>Source</b> drop-down list, select <b>Network</b>.</li>
                                            <li value="6">In the <b>Source Address</b> text box, type the remote network IP address.</li>
                                            <li value="7">From the  <b>Destination</b> drop-down list, select <b>Network</b>.</li>
                                            <li value="8">In the <b>Destination Address</b> text box, type the local network IP address.</li>
                                            <li value="9">Keep the default values for all other settings.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new pfSense11.png" alt="Screenshot of pfSense, picture new11" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="10">
                                            <li value="10">Click <b>Save</b>.</li>
                                            <li value="11">(Optional) Repeat steps 2-10 to create another rule.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/new pfSense12.png" alt="Screenshot of pfSense, picture new12" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="12">
                                            <li value="12">Click <b>Apply Changes</b>.</li>
                                        </ol>
                                        <h2 id="TesttheIntegration" data-magellan-target="TesttheIntegration">Test the Integration</h2>
                                        <p>To test the integration, from Fireware Web UI:</p>
                                        <ol>
                                            <li value="1">Select <b>System Status &gt; VPN Statistics</b>.</li>
                                            <li value="2">Select the <b>Branch Office VPN</b> tab.</li>
                                            <li value="3">Verify that the VPN is established.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img src="_images/pfSense_BOVPN/Test_BOVPN-Statistics.png" alt="Screenshot of  BOVPN statistics" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="4">
                                            <li value="4">Verify that Host 1 (behind the Firebox) and Host 2 (behind the pfSense) can successfully ping each other.</li>
                                        </ol>
                                    </div>
                                    <p class="FooterTop"><a href="../../en-US/Fireware/support/doc_feedback.html">Give Us Feedback</a>&#160;&#160;●&#160;&#160;
            <a href="../../en-US/Fireware/support/getsupport.html">Get Support</a>&#160;&#160;●&#160;&#160;
            <a href="https://www.watchguard.com/wgrd-help/documentation/overview" target="_blank">All Product Documentation</a>&#160;&#160;●&#160;&#160;
            <a href="https://techsearch.watchguard.com/" target="_blank">Technical Search</a></p>
                                    <p class="Footer">© <span class="mc-variable Global.CurrentYear variable">2024</span> WatchGuard Technologies, Inc. All rights reserved. WatchGuard and the WatchGuard logo are registered trademarks or trademarks of WatchGuard Technologies in the United States and other countries. Various other trademarks are held by their respective owners.</p>
                                    <p class="Footer">&#160;</p>
                                    <div id="expand-collapse" title="Expand/collapse navigation" class="collapse">
                                    </div>
                                    <script src="../../Resources/MasterPages/scripts/expand-collapse.js">
                                    </script>
                                    <script src="../../Resources/MasterPages/scripts/cover-hide.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>