<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Help_Center_Side_Nav" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-toc-path="Self-Help Tools|Integration Guides|General" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Expires" content="3600" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="120x120" href="../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>Microsoft Entra ID SAML Authentication with WatchGuard Firebox Authentication Portal </title>
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/help_(en-US).css" rel="stylesheet" type="text/css" />
        <link rel="apple-touch-icon" sizes="120x120" href="../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-T3SCZC3');/* ]]> */</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" role="navigation" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 979px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../en-US/_intro/home.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div id="cover">
                                    </div>
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T3SCZC3" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="6" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                        </div>
                                    </div>
                                    <div role="main" id="mc-main-content">
                                        <h1 id="MicrosoftEntraIDSAMLAuthenticationwithWatchGuardFireboxAuthenticationPortal" data-magellan-target="MicrosoftEntraIDSAMLAuthenticationwithWatchGuardFireboxAuthenticationPortal"><a name="aanchor2063"></a>
                                            <MadCap:concept term="Self-Help Tools" />Microsoft Entra ID SAML Authentication with WatchGuard Firebox Authentication Portal </h1>
                                        <h2 id="DeploymentOverview" data-magellan-target="DeploymentOverview">Deployment Overview</h2>
                                        <p>The SAML authentication server in Fireware 12.11 or higher can integrate with several services. After you configure the SAML authentication server on the Firebox, you can use it to integrate with the Authentication Portal.</p>
                                        <p>This integration guide  describes how to set up SAML&#160;authentication for the Authentication Portal so that users must authenticate when they connect to the Firebox over port 4100.</p>
                                        <p>For information about the integration end result, go to the <a href="#Test">Test the Integration</a> section.</p>
                                        <h2 id="Contents" data-magellan-target="Contents">Contents</h2>
                                        <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 980px)" class="nocontent menu _Skins_Help_Center_Menu_Slide mc-component">
                                            <li class="tree-node"><a href="#MicrosoftEntraIDSAMLAuthenticationwithWatchGuardFireboxAuthenticationPortal">Microsoft Entra ID SAML Authentication with WatchGuard Firebox Authentication Portal </a>
                                            </li>
                                            <li>
                                                <ul>
                                                    <li class="tree-node"><a href="#DeploymentOverview">Deployment Overview</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#Contents">Contents</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#IntegrationSummary">Integration Summary</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#TestTopology">Test Topology</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#EnabletheFireboxSAMLAuthenticationServer">Enable the Firebox SAML Authentication Server</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#ConfigureFirewallPolicies">Configure Firewall Policies</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#ConfigureMicrosoftEntraID">Configure Microsoft Entra ID</a>
                                                    </li>
                                                    <li>
                                                        <ul>
                                                            <li class="tree-node"><a href="#CreateaMicrosoftEntraIDGroupandUser">Create a Microsoft Entra ID Group and User</a>
                                                            </li>
                                                            <li class="tree-node"><a href="#ConfigureaSAMLApplication">Configure a SAML Application</a>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li class="tree-node"><a href="#CompleteFireboxSetup">Complete Firebox Setup</a>
                                                    </li>
                                                    <li class="tree-node"><a href="#TesttheIntegration">Test the Integration</a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <div class="summary-left">
                                            <h2 id="IntegrationSummary" data-magellan-target="IntegrationSummary">Integration Summary</h2>
                                            <p>The hardware and software used in this guide include:</p>
                                            <ul style="list-style-type: square;">
                                                <li>Azure portal administrator credentials</li>
                                                <li>WatchGuard Firebox with Fireware v12.11 or higher</li>
                                                <li>A fully qualified domain name (FQDN) that can resolve the external IP address of Firebox</li>
                                            </ul>
                                            <p>Additional charges might apply for the use of Microsoft Entra ID.</p>
                                        </div>
                                        <h2 id="TestTopology" data-magellan-target="TestTopology">Test Topology</h2>
                                        <p>Microsoft Entra ID can use SAML authentication to communicate with various cloud-based services and service providers. This integration guide demonstrates how to use Microsoft Entra ID to communicate with a WatchGuard Firebox over a public Internet connection.</p>
                                        <p class="img_indent_1">
                                            <img src="_images/azure_saml_Firebox_4100/Topology.jpg" alt="Screenshot of Topology diagram" style="max-height: auto;max-width: 100%;" />
                                        </p>
                                        <h2 style="page-break-before: always;" id="EnabletheFireboxSAMLAuthenticationServer" data-magellan-target="EnabletheFireboxSAMLAuthenticationServer">Enable the Firebox SAML Authentication Server</h2>
                                        <p>To enable the Firebox SAML&#160;authentication server:</p>
                                        <ol>
                                            <li value="1">
                                                <p>Log in to Fireware Web UI at:<br /><span class="Input">https://&lt;your Firebox IP address&gt;:8080</span></p>
                                            </li>
                                            <li value="2">From the left navigation, select <b>Authentication &gt; Servers</b>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Firebox Auth Server setup 1.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Firebox, Firebox Auth Server setup 1" />
                                            </p>
                                            <li value="3">
                                                <p>Select SAML.<br /><span class="NumContinued">The SAML settings page opens.</span></p>
                                            </li>
                                            <li value="4">Select <b>Enable SAML</b>.</li>
                                            <li value="5"><a name="In2"></a>In the <b>IdP Name</b> text box, type a name for the identity provider. In our example, we type <b>Entra_ID_SAML</b>.</li>
                                            <li value="6">In the <b>Host Name</b> text box, type an FQDN that resolves to the Firebox external interface.</li>
                                            <li value="7">Keep the <b>IdP Metadata URL</b> text box blank for now, we add the IdP settings later.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Firebox Auth Server setup 2.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Firebox, Firebox Auth Server setup 2" />
                                            </p>
                                            <li value="8">Click <b>Save</b>.</li>
                                        </ol>
                                        <h2 id="ConfigureFirewallPolicies" data-magellan-target="ConfigureFirewallPolicies">Configure Firewall Policies</h2>
                                        <p>The Authentication Portal is a page that the Firebox hosts. For the Firebox to allow connections to the Authentication Portal, you must add a WG-Auth firewall policy to the Firebox configuration. A WG-Auth policy allows TCP traffic on port 4100.</p>
                                        <p>To configure the WG-Auth policy:</p>
                                        <ol start="1">
                                            <li value="1">Log in to Fireware Web UI at:<br /><span class="Input">https://&lt;your Firebox IP address&gt;:8080</span></li>
                                            <li value="2">Select <b>Firewall &gt; Firewall Policies</b>.</li>
                                            <li value="3">Click <b>Add Policy</b>.<br /><span class="NumContinued">The Select a Policy Type page opens.</span></li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img alt="Screenshot of Firebox, wg-auth-001" src="_images/azure_saml_Firebox_4100/Firebox-WG-Auth-001.jpg" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="4">
                                            <li value="4">From the <b>Packet Filter</b> drop-down list, select <b>WG-Auth</b>.</li>
                                            <li value="5">Click <b>Add Policy</b>.</li>
                                            <li value="6">From the <b>Settings</b> tab, in the <b>From</b> and <b>To</b> sections, specify the source and destination of connections the policy applies to. You must also add the Firebox alias in the <b>To</b> section. For more information, go to <a href="https://www.watchguard.com/help/docs/help-center/en-US/Content/en-US/Fireware/policies/policy_access_rules_c.html" target="_blank">Set Access Rules for a Policy</a>.</li>
                                            <li value="7">(Optional) Check <b>Send a log message</b>.</li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img alt="Screenshot of Firebox, wg-auth-002" src="_images/azure_saml_Firebox_4100/Firebox-WG-Auth-002.jpg" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <ol start="8">
                                            <li value="8">Click <b>Save</b>.</li>
                                            <li value="9">Open a web browser and go to the SP Metadata URL at:<br /><span class="Input">https://[Host name or Firebox IP address]:4100/auth/saml</span></li>
                                            <li value="10">Make sure you have this SP information from <b>Option 2</b>.You use this information when you configure Entra ID:<ul start="4"><li><b>AML Entity ID</b> in this format:  <span class="Input"><br />https://&lt;host name&gt;:4100/auth/saml</span></li><li><b>Assertion Consumer Service (ACS) URL</b> in this format: <span class="Input"><br />https://&lt;host name&gt;:4100/auth/saml/acs</span></li><li><b>Single Logout Service (SLS) URL</b> in this format: <span class="Input"><br />https://&lt;host name&gt;:4100/auth/saml/sls</span></li><li><a name="Download"></a>Download the <b>X.509 Certificate</b>.</li></ul></li>
                                        </ol>
                                        <p class="img_indent_1">
                                            <img alt="Screenshot of Firebox, wg-auth-002" src="_images/azure_saml_Firebox_4100/Firebox-Authentication-Portal-Metadata-001.jpg" style="max-width: 100%;max-height: auto;" />
                                        </p>
                                        <h2 style="page-break-before: always;" id="ConfigureMicrosoftEntraID" data-magellan-target="ConfigureMicrosoftEntraID">Configure Microsoft Entra ID</h2>
                                        <p>To configure  Microsoft Entra ID, complete these steps:</p>
                                        <ol>
                                            <li value="1"><a href="#Create">Create a Microsoft Entra ID group and user</a>.
            </li>
                                            <li value="2"><a href="#Configur">Configure a SAML application</a>.
            </li>
                                        </ol>
                                        <h3 id="CreateaMicrosoftEntraIDGroupandUser" data-magellan-target="CreateaMicrosoftEntraIDGroupandUser"><a name="Create"></a>Create a Microsoft Entra ID Group and User</h3>
                                        <p>To create a group in Entra ID:</p>
                                        <ol>
                                            <li value="1">Log in to the Azure portal with your Microsoft Azure account credentials.</li>
                                            <li value="2">Click <b>Microsoft Entra ID</b>.</li>
                                            <li value="3">From the left navigation, click <b>Manage &gt; Groups</b>.</li>
                                            <li value="4">Click <b>New Group</b>.</li>
                                            <li value="5">From the <b>Group Type</b> drop-down list, select <b>Security</b>.</li>
                                            <li value="6"><a name="In"></a>In the <b>Group Name</b> text box, type a descriptive group name. For our example, we type <b>authentication_portal_group</b>.</li>
                                            <li value="7">From the <b>Membership Type</b> drop-down list, select <b>Assigned</b>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_Group-001.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure new group setup 1" />
                                            </p>
                                            <li value="8">Keep the default values for other settings.</li>
                                            <li value="9">Click <b>Create</b>.</li>
                                        </ol>
                                        <p>To create a user in Entra ID:</p>
                                        <ol>
                                            <li value="1">Log in to the Azure portal with your Microsoft Azure account credentials.</li>
                                            <li value="2">Click <b>Microsoft Entra ID</b>.</li>
                                            <li value="3">From the left navigation, click <b>Manage &gt; Users</b>.</li>
                                            <li value="4">Click <b>New User &gt; Create new user</b>.</li>
                                            <li value="5">Under the <b>Basics</b> tab, provide the user information.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_User-001.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure new user setup 1" />
                                            </p>
                                            <li value="6">From the <b>Properties</b> tab, type the <b>First name</b>, <b>Last name</b>, and <b>Email</b>. </li>
                                            <li value="7">Select <b>Usage location</b>.</li>
                                            <li value="8">From the <b>Assignments</b> tab, click <b>Add group</b> to assign the user to the group you created.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_User-002.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure new user setup 2" />
                                            </p>
                                            <li value="9">Click <b>Review + create</b>.</li>
                                            <li value="10">Click <b>Create</b>.</li>
                                        </ol>
                                        <h3 id="ConfigureaSAMLApplication" data-magellan-target="ConfigureaSAMLApplication"><a name="Configur"></a>Configure a SAML Application</h3>
                                        <p>To configure a SAML application in Microsoft Entra ID:</p>
                                        <ol>
                                            <li value="1">Log in to the Azure portal with your Microsoft Azure account credentials.</li>
                                            <li value="2">Click <b>Microsoft Entra ID</b>.</li>
                                            <li value="3">From the left navigation, click <b>Manage &gt; Enterprise applications</b>.</li>
                                            <li value="4">Click <b>New Application</b>.</li>
                                            <li value="5">Click <b>Create your own application</b>.</li>
                                            <li value="6">In the <b>What's the name of your app?</b> text box, type a descriptive name. For our example, we type <b>Firebox Authentication Portal SAML</b>.</li>
                                            <li value="7">For <b>What are you looking to do with your application?</b>, select <b>Integrate any other application you don't find in the gallery (Non-gallery)</b>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_Application-001.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure SAML app setup 1" />
                                            </p>
                                            <li value="8">Click <b>Create</b>.</li>
                                            <li value="9">From the left navigation, click <b>Manage &gt; User and Groups</b>.</li>
                                            <li value="10">Click <b>Add user/group</b>.</li>
                                            <li value="11">For <b>Users and groups</b>, click <b>None Selected</b> to assign users and groups to this application. For our example, we select the group we created.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_Application-002.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure SAML app setup 2" />
                                            </p>
                                            <li value="12">Click <b>Select</b>.</li>
                                            <li value="13">Click <b>Assign</b>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_Application-003.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure SAML app setup 3" />
                                            </p>
                                            <li value="14">From the left navigation, click <b>Single sign-on</b>.</li>
                                            <li value="15">For <b>Select a single sign-on method</b>, select <b>SAML</b>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_Application-004.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure SAML app setup 4" />
                                            </p>
                                            <li value="16">For the <b>Basic SAML Configuration</b>, click <b>Edit</b>.</li>
                                            <li value="17">Specify these settings:</li>
                                            <p class="Option_indent">Identifier (Entity ID)</p>
                                            <p class="OptionDef_indent"><span class="Input">https://&lt;your host name&gt;:4100/auth/saml</span>
                                            </p>
                                            <p class="OptionDef_indent">The name on the WatchGuard Firebox SAML 2.0 Configuration page is <b>SAML Entity ID</b>.</p>
                                            <p class="Option_indent">Reply URL (Assertion Consumer Service URL)</p>
                                            <p class="OptionDef_indent"><span class="Input">https://&lt;your host name&gt;:4100/auth/saml/acs</span>
                                            </p>
                                            <p class="OptionDef_indent">The name on the WatchGuard Firebox SAML 2.0 Configuration page is <b>Assertion Consumer Service (ACS) URL</b>.</p>
                                            <p class="Option_indent">Logout Url (Optional)</p>
                                            <p class="OptionDef_indent"><span class="Input">https://&lt;your host name&gt;:4100/auth/saml/sls</span>
                                            </p>
                                            <p class="OptionDef_indent">The name on the WatchGuard Firebox SAML 2.0 Configuration page is <b>Single Logout Service (SLS) URL</b>.</p>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_Application-005.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure SAML app setup 5" />
                                            </p>
                                            <li value="18">Click <b>Save</b>, then click <img alt="The screenshot of close icon" src="_images/azure_saml_Firebox_4100/close-icon.jpg" /> to close the <b>Basic SAML Configuration</b> page.</li>
                                            <li value="19">For the <b>Test Single sign-on</b> dialog box, click <b>No, I'll test later</b>.</li>
                                            <li value="20">For the <b>Attributes &amp; Claims</b> section, click <b>Edit</b>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_Application-006.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure SAML app setup 6" />
                                            </p>
                                            <li value="21">Click <b>Add a group claim</b> to configure the group authentication for the Authentication Portal.</li>
                                            <li value="22">For <b>Which groups associated with the user should be returned in the claim?</b>, select <b>Groups assigned to the application</b>.</li>
                                            <li value="23">From the <b>Source attribute</b> drop-down list, select <b>Cloud-only group display names</b>.</li>
                                            <li value="24">Click to expand the <b>Advanced options</b>, then select <b>Customize the name of the group claim</b>.</li>
                                            <li value="25">In the <b>Name (required)</b> text box, type <b>memberOf</b>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_Application-007.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure SAML app setup 7" />
                                            </p>
                                            <li value="26">Click <b>Save</b>, then click <img src="_images/azure_saml_Firebox_4100/close-icon.jpg" alt="The screenshot of close icon" /> to close the <b>Attributes &amp; Claims</b> page.</li>
                                            <li value="27"><a name="For"></a>For the <b>SAML Certificates</b> section, copy the <b>App Federation Metadata Url</b>. You use this URL to complete the SAML authentication server configuration on Firebox.</li>
                                            <li value="28">From the left navigation, click <b>Security &gt; Token Encryption</b>.</li>
                                            <li value="29">Click <b>Import Certificate</b>, then select the certificate you downloaded in the <a href="#Download">previous section</a>.</li>
                                            <li value="30">Click <img src="_images/azure_saml_Firebox_4100/more-icon.jpg" alt="The screenshot of more icon" /> then click <b>Activate Token Encryption Certificate</b>.</li>
                                            <li value="31">From the <b>Activate token encryption certificate</b> dialog box, click <b>Yes</b>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Entra_ID_Application-008.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Azure SAML app setup 8" />
                                            </p>
                                        </ol>
                                        <h2 style="page-break-before: always;" id="CompleteFireboxSetup" data-magellan-target="CompleteFireboxSetup">Complete Firebox Setup</h2>
                                        <p>From Fireware Web UI:</p>
                                        <ol>
                                            <li value="1">Log in to Fireware Web UI:<br /><span class="Input">https://&lt;your Firebox IP address&gt;:8080</span></li>
                                            <li value="2">From the left navigation, select <b>Authentication &gt; Servers</b>.</li>
                                            <li value="3">Select <b>SAML</b>. </li>
                                            <li value="4">In the <b>IdP Metadata URL</b> text box, paste the value of the <b>App Federation Metadata Url</b> you copied from the <a href="#For">previous section</a>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Firebox Auth Server setup 3.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Entra ID, Firebox Auth Server setup 3" />
                                            </p>
                                            <li value="5">Click <b>Save</b>.</li>
                                            <li value="6">From the left navigation, select <b>Authentication &gt; Users and Groups</b>. </li>
                                            <li value="7">Click <b>Add</b>.<br /><span class="NumContinued">The Add User or Group page appears.</span></li>
                                            <p class="Note">You can add a user for user authentication or a group for group authentication. In our example, we add a group for group authentication. If you want to add a user, the user name must be the same as the user name in Microsoft Entra ID. Assign the user to the SAML&#160;application in Microsoft Entra ID.</p>
                                            <li value="8">For <b>Type</b>, select <b>Group</b>.</li>
                                            <li value="9">In the <b>Name</b> text box, type a name for the group. The group name must be the same as <a href="#In">the group</a> you create and assign to the SAML application in Microsoft Entra ID.</li>
                                            <li value="10">From the <b>Authentication Server</b> drop-down list, select the SAML authentication server you created in the <a href="#In2">previous section</a>. <br /></li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Firebox-Add-Group-001.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Firebox, Add group 001" />
                                            </p>
                                            <li value="11">Click <b>OK</b>.</li>
                                            <li value="12">Click <b>Save</b>.</li>
                                        </ol>
                                        <h2 id="TesttheIntegration" data-magellan-target="TesttheIntegration"><a name="Test"></a>Test the Integration</h2>
                                        <p>To test the integration of Entra ID SAML&#160;authentication with the Authentication Portal:</p>
                                        <ol>
                                            <li value="1">Type the URL for the Authentication Portal in this format: <span class="Input"><br />https://&lt;Firebox host name&gt;:4100</span><br /><span class="NumContinued">The login page appears with the name of the SAML authentication server you configured at the top of the page.</span><br /></li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Authentication-Portal-SAML-Test-001.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Access Portal, Integration test 1" />
                                            </p>
                                            <li value="2">To log in, click the name of the  SAML Authentication server. In this example, we click <b>Entra_ID_SAML</b>.</li>
                                            <li value="3">On the Microsoft <b>Sign in</b> page, type the Microsoft Entra ID user name, and click <b>Next</b>.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Test-Sign-In-001.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Access Portal, Integration test Sign 001" />
                                            </p>
                                            <li value="4">Type the Microsoft Entra ID user password, and click <b>Sign In</b>. </li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Test-Sign-In-002.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Access Portal, Integration test Sign In 002" />
                                            </p>
                                            <li value="5">Click <b>Yes</b> to stay signed in.</li>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Test-Sign-In-003.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Access Portal, Integration test Sign In 003" />
                                            </p>
                                            <p>Authentication is successful.</p>
                                            <p class="img_indent_1">
                                                <img src="_images/azure_saml_Firebox_4100/Authentication-Portal-SAML-Test-002.jpg" style="max-height: auto;max-width: 100%;" alt="Screenshot of Access Portal, Integration test 2" />
                                            </p>
                                        </ol>
                                    </div>
                                    <p class="FooterTop"><a href="../../en-US/Fireware/support/doc_feedback.html">Give Us Feedback</a>&#160;&#160;●&#160;&#160;
            <a href="../../en-US/Fireware/support/getsupport.html">Get Support</a>&#160;&#160;●&#160;&#160;
            <a href="https://www.watchguard.com/wgrd-help/documentation/overview" target="_blank">All Product Documentation</a>&#160;&#160;●&#160;&#160;
            <a href="https://techsearch.watchguard.com/" target="_blank">Technical Search</a></p>
                                    <p class="Footer">© <span class="mc-variable Global.CurrentYear variable">2024</span> WatchGuard Technologies, Inc. All rights reserved. WatchGuard and the WatchGuard logo are registered trademarks or trademarks of WatchGuard Technologies in the United States and other countries. Various other trademarks are held by their respective owners.</p>
                                    <p class="Footer">&#160;</p>
                                    <div id="expand-collapse" title="Expand/collapse navigation" class="collapse">
                                    </div>
                                    <script src="../../Resources/MasterPages/scripts/expand-collapse.js">
                                    </script>
                                    <script src="../../Resources/MasterPages/scripts/cover-hide.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>